// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"

	"entgo.io/ent/dialect"
	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/google/uuid"
	"github.com/luoling8192/mindwave/ent/chatmessage"
	pgvector "github.com/pgvector/pgvector-go"
)

// ChatMessageCreate is the builder for creating a ChatMessage entity.
type ChatMessageCreate struct {
	config
	mutation *ChatMessageMutation
	hooks    []Hook
	conflict []sql.ConflictOption
}

// SetPlatform sets the "platform" field.
func (_c *ChatMessageCreate) SetPlatform(v string) *ChatMessageCreate {
	_c.mutation.SetPlatform(v)
	return _c
}

// SetNillablePlatform sets the "platform" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillablePlatform(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetPlatform(*v)
	}
	return _c
}

// SetPlatformMessageID sets the "platform_message_id" field.
func (_c *ChatMessageCreate) SetPlatformMessageID(v string) *ChatMessageCreate {
	_c.mutation.SetPlatformMessageID(v)
	return _c
}

// SetNillablePlatformMessageID sets the "platform_message_id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillablePlatformMessageID(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetPlatformMessageID(*v)
	}
	return _c
}

// SetFromID sets the "from_id" field.
func (_c *ChatMessageCreate) SetFromID(v string) *ChatMessageCreate {
	_c.mutation.SetFromID(v)
	return _c
}

// SetNillableFromID sets the "from_id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableFromID(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetFromID(*v)
	}
	return _c
}

// SetFromName sets the "from_name" field.
func (_c *ChatMessageCreate) SetFromName(v string) *ChatMessageCreate {
	_c.mutation.SetFromName(v)
	return _c
}

// SetNillableFromName sets the "from_name" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableFromName(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetFromName(*v)
	}
	return _c
}

// SetFromUserUUID sets the "from_user_uuid" field.
func (_c *ChatMessageCreate) SetFromUserUUID(v uuid.UUID) *ChatMessageCreate {
	_c.mutation.SetFromUserUUID(v)
	return _c
}

// SetNillableFromUserUUID sets the "from_user_uuid" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableFromUserUUID(v *uuid.UUID) *ChatMessageCreate {
	if v != nil {
		_c.SetFromUserUUID(*v)
	}
	return _c
}

// SetOwnerAccountID sets the "owner_account_id" field.
func (_c *ChatMessageCreate) SetOwnerAccountID(v uuid.UUID) *ChatMessageCreate {
	_c.mutation.SetOwnerAccountID(v)
	return _c
}

// SetNillableOwnerAccountID sets the "owner_account_id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableOwnerAccountID(v *uuid.UUID) *ChatMessageCreate {
	if v != nil {
		_c.SetOwnerAccountID(*v)
	}
	return _c
}

// SetInChatID sets the "in_chat_id" field.
func (_c *ChatMessageCreate) SetInChatID(v string) *ChatMessageCreate {
	_c.mutation.SetInChatID(v)
	return _c
}

// SetNillableInChatID sets the "in_chat_id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableInChatID(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetInChatID(*v)
	}
	return _c
}

// SetInChatType sets the "in_chat_type" field.
func (_c *ChatMessageCreate) SetInChatType(v string) *ChatMessageCreate {
	_c.mutation.SetInChatType(v)
	return _c
}

// SetNillableInChatType sets the "in_chat_type" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableInChatType(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetInChatType(*v)
	}
	return _c
}

// SetContent sets the "content" field.
func (_c *ChatMessageCreate) SetContent(v string) *ChatMessageCreate {
	_c.mutation.SetContent(v)
	return _c
}

// SetNillableContent sets the "content" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableContent(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetContent(*v)
	}
	return _c
}

// SetIsReply sets the "is_reply" field.
func (_c *ChatMessageCreate) SetIsReply(v bool) *ChatMessageCreate {
	_c.mutation.SetIsReply(v)
	return _c
}

// SetNillableIsReply sets the "is_reply" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableIsReply(v *bool) *ChatMessageCreate {
	if v != nil {
		_c.SetIsReply(*v)
	}
	return _c
}

// SetReplyToName sets the "reply_to_name" field.
func (_c *ChatMessageCreate) SetReplyToName(v string) *ChatMessageCreate {
	_c.mutation.SetReplyToName(v)
	return _c
}

// SetNillableReplyToName sets the "reply_to_name" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableReplyToName(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetReplyToName(*v)
	}
	return _c
}

// SetReplyToID sets the "reply_to_id" field.
func (_c *ChatMessageCreate) SetReplyToID(v string) *ChatMessageCreate {
	_c.mutation.SetReplyToID(v)
	return _c
}

// SetNillableReplyToID sets the "reply_to_id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableReplyToID(v *string) *ChatMessageCreate {
	if v != nil {
		_c.SetReplyToID(*v)
	}
	return _c
}

// SetPlatformTimestamp sets the "platform_timestamp" field.
func (_c *ChatMessageCreate) SetPlatformTimestamp(v int64) *ChatMessageCreate {
	_c.mutation.SetPlatformTimestamp(v)
	return _c
}

// SetNillablePlatformTimestamp sets the "platform_timestamp" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillablePlatformTimestamp(v *int64) *ChatMessageCreate {
	if v != nil {
		_c.SetPlatformTimestamp(*v)
	}
	return _c
}

// SetContentVector1536 sets the "content_vector_1536" field.
func (_c *ChatMessageCreate) SetContentVector1536(v pgvector.Vector) *ChatMessageCreate {
	_c.mutation.SetContentVector1536(v)
	return _c
}

// SetContentVector1024 sets the "content_vector_1024" field.
func (_c *ChatMessageCreate) SetContentVector1024(v pgvector.Vector) *ChatMessageCreate {
	_c.mutation.SetContentVector1024(v)
	return _c
}

// SetContentVector768 sets the "content_vector_768" field.
func (_c *ChatMessageCreate) SetContentVector768(v pgvector.Vector) *ChatMessageCreate {
	_c.mutation.SetContentVector768(v)
	return _c
}

// SetJiebaTokens sets the "jieba_tokens" field.
func (_c *ChatMessageCreate) SetJiebaTokens(v []string) *ChatMessageCreate {
	_c.mutation.SetJiebaTokens(v)
	return _c
}

// SetCreatedAt sets the "created_at" field.
func (_c *ChatMessageCreate) SetCreatedAt(v int64) *ChatMessageCreate {
	_c.mutation.SetCreatedAt(v)
	return _c
}

// SetNillableCreatedAt sets the "created_at" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableCreatedAt(v *int64) *ChatMessageCreate {
	if v != nil {
		_c.SetCreatedAt(*v)
	}
	return _c
}

// SetUpdatedAt sets the "updated_at" field.
func (_c *ChatMessageCreate) SetUpdatedAt(v int64) *ChatMessageCreate {
	_c.mutation.SetUpdatedAt(v)
	return _c
}

// SetNillableUpdatedAt sets the "updated_at" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableUpdatedAt(v *int64) *ChatMessageCreate {
	if v != nil {
		_c.SetUpdatedAt(*v)
	}
	return _c
}

// SetDeletedAt sets the "deleted_at" field.
func (_c *ChatMessageCreate) SetDeletedAt(v int64) *ChatMessageCreate {
	_c.mutation.SetDeletedAt(v)
	return _c
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableDeletedAt(v *int64) *ChatMessageCreate {
	if v != nil {
		_c.SetDeletedAt(*v)
	}
	return _c
}

// SetID sets the "id" field.
func (_c *ChatMessageCreate) SetID(v uuid.UUID) *ChatMessageCreate {
	_c.mutation.SetID(v)
	return _c
}

// SetNillableID sets the "id" field if the given value is not nil.
func (_c *ChatMessageCreate) SetNillableID(v *uuid.UUID) *ChatMessageCreate {
	if v != nil {
		_c.SetID(*v)
	}
	return _c
}

// Mutation returns the ChatMessageMutation object of the builder.
func (_c *ChatMessageCreate) Mutation() *ChatMessageMutation {
	return _c.mutation
}

// Save creates the ChatMessage in the database.
func (_c *ChatMessageCreate) Save(ctx context.Context) (*ChatMessage, error) {
	_c.defaults()
	return withHooks(ctx, _c.sqlSave, _c.mutation, _c.hooks)
}

// SaveX calls Save and panics if Save returns an error.
func (_c *ChatMessageCreate) SaveX(ctx context.Context) *ChatMessage {
	v, err := _c.Save(ctx)
	if err != nil {
		panic(err)
	}
	return v
}

// Exec executes the query.
func (_c *ChatMessageCreate) Exec(ctx context.Context) error {
	_, err := _c.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_c *ChatMessageCreate) ExecX(ctx context.Context) {
	if err := _c.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_c *ChatMessageCreate) defaults() {
	if _, ok := _c.mutation.Platform(); !ok {
		v := chatmessage.DefaultPlatform
		_c.mutation.SetPlatform(v)
	}
	if _, ok := _c.mutation.PlatformMessageID(); !ok {
		v := chatmessage.DefaultPlatformMessageID
		_c.mutation.SetPlatformMessageID(v)
	}
	if _, ok := _c.mutation.FromID(); !ok {
		v := chatmessage.DefaultFromID
		_c.mutation.SetFromID(v)
	}
	if _, ok := _c.mutation.FromName(); !ok {
		v := chatmessage.DefaultFromName
		_c.mutation.SetFromName(v)
	}
	if _, ok := _c.mutation.InChatID(); !ok {
		v := chatmessage.DefaultInChatID
		_c.mutation.SetInChatID(v)
	}
	if _, ok := _c.mutation.InChatType(); !ok {
		v := chatmessage.DefaultInChatType
		_c.mutation.SetInChatType(v)
	}
	if _, ok := _c.mutation.Content(); !ok {
		v := chatmessage.DefaultContent
		_c.mutation.SetContent(v)
	}
	if _, ok := _c.mutation.IsReply(); !ok {
		v := chatmessage.DefaultIsReply
		_c.mutation.SetIsReply(v)
	}
	if _, ok := _c.mutation.ReplyToName(); !ok {
		v := chatmessage.DefaultReplyToName
		_c.mutation.SetReplyToName(v)
	}
	if _, ok := _c.mutation.ReplyToID(); !ok {
		v := chatmessage.DefaultReplyToID
		_c.mutation.SetReplyToID(v)
	}
	if _, ok := _c.mutation.PlatformTimestamp(); !ok {
		v := chatmessage.DefaultPlatformTimestamp
		_c.mutation.SetPlatformTimestamp(v)
	}
	if _, ok := _c.mutation.JiebaTokens(); !ok {
		v := chatmessage.DefaultJiebaTokens
		_c.mutation.SetJiebaTokens(v)
	}
	if _, ok := _c.mutation.CreatedAt(); !ok {
		v := chatmessage.DefaultCreatedAt()
		_c.mutation.SetCreatedAt(v)
	}
	if _, ok := _c.mutation.UpdatedAt(); !ok {
		v := chatmessage.DefaultUpdatedAt()
		_c.mutation.SetUpdatedAt(v)
	}
	if _, ok := _c.mutation.DeletedAt(); !ok {
		v := chatmessage.DefaultDeletedAt
		_c.mutation.SetDeletedAt(v)
	}
	if _, ok := _c.mutation.ID(); !ok {
		v := chatmessage.DefaultID()
		_c.mutation.SetID(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_c *ChatMessageCreate) check() error {
	if _, ok := _c.mutation.Platform(); !ok {
		return &ValidationError{Name: "platform", err: errors.New(`ent: missing required field "ChatMessage.platform"`)}
	}
	if v, ok := _c.mutation.Platform(); ok {
		if err := chatmessage.PlatformValidator(v); err != nil {
			return &ValidationError{Name: "platform", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.platform": %w`, err)}
		}
	}
	if _, ok := _c.mutation.PlatformMessageID(); !ok {
		return &ValidationError{Name: "platform_message_id", err: errors.New(`ent: missing required field "ChatMessage.platform_message_id"`)}
	}
	if v, ok := _c.mutation.PlatformMessageID(); ok {
		if err := chatmessage.PlatformMessageIDValidator(v); err != nil {
			return &ValidationError{Name: "platform_message_id", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.platform_message_id": %w`, err)}
		}
	}
	if _, ok := _c.mutation.FromID(); !ok {
		return &ValidationError{Name: "from_id", err: errors.New(`ent: missing required field "ChatMessage.from_id"`)}
	}
	if v, ok := _c.mutation.FromID(); ok {
		if err := chatmessage.FromIDValidator(v); err != nil {
			return &ValidationError{Name: "from_id", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.from_id": %w`, err)}
		}
	}
	if _, ok := _c.mutation.FromName(); !ok {
		return &ValidationError{Name: "from_name", err: errors.New(`ent: missing required field "ChatMessage.from_name"`)}
	}
	if v, ok := _c.mutation.FromName(); ok {
		if err := chatmessage.FromNameValidator(v); err != nil {
			return &ValidationError{Name: "from_name", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.from_name": %w`, err)}
		}
	}
	if _, ok := _c.mutation.InChatID(); !ok {
		return &ValidationError{Name: "in_chat_id", err: errors.New(`ent: missing required field "ChatMessage.in_chat_id"`)}
	}
	if v, ok := _c.mutation.InChatID(); ok {
		if err := chatmessage.InChatIDValidator(v); err != nil {
			return &ValidationError{Name: "in_chat_id", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.in_chat_id": %w`, err)}
		}
	}
	if _, ok := _c.mutation.InChatType(); !ok {
		return &ValidationError{Name: "in_chat_type", err: errors.New(`ent: missing required field "ChatMessage.in_chat_type"`)}
	}
	if v, ok := _c.mutation.InChatType(); ok {
		if err := chatmessage.InChatTypeValidator(v); err != nil {
			return &ValidationError{Name: "in_chat_type", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.in_chat_type": %w`, err)}
		}
	}
	if _, ok := _c.mutation.Content(); !ok {
		return &ValidationError{Name: "content", err: errors.New(`ent: missing required field "ChatMessage.content"`)}
	}
	if v, ok := _c.mutation.Content(); ok {
		if err := chatmessage.ContentValidator(v); err != nil {
			return &ValidationError{Name: "content", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.content": %w`, err)}
		}
	}
	if _, ok := _c.mutation.IsReply(); !ok {
		return &ValidationError{Name: "is_reply", err: errors.New(`ent: missing required field "ChatMessage.is_reply"`)}
	}
	if _, ok := _c.mutation.ReplyToName(); !ok {
		return &ValidationError{Name: "reply_to_name", err: errors.New(`ent: missing required field "ChatMessage.reply_to_name"`)}
	}
	if v, ok := _c.mutation.ReplyToName(); ok {
		if err := chatmessage.ReplyToNameValidator(v); err != nil {
			return &ValidationError{Name: "reply_to_name", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.reply_to_name": %w`, err)}
		}
	}
	if _, ok := _c.mutation.ReplyToID(); !ok {
		return &ValidationError{Name: "reply_to_id", err: errors.New(`ent: missing required field "ChatMessage.reply_to_id"`)}
	}
	if v, ok := _c.mutation.ReplyToID(); ok {
		if err := chatmessage.ReplyToIDValidator(v); err != nil {
			return &ValidationError{Name: "reply_to_id", err: fmt.Errorf(`ent: validator failed for field "ChatMessage.reply_to_id": %w`, err)}
		}
	}
	if _, ok := _c.mutation.PlatformTimestamp(); !ok {
		return &ValidationError{Name: "platform_timestamp", err: errors.New(`ent: missing required field "ChatMessage.platform_timestamp"`)}
	}
	if _, ok := _c.mutation.ContentVector1536(); !ok {
		return &ValidationError{Name: "content_vector_1536", err: errors.New(`ent: missing required field "ChatMessage.content_vector_1536"`)}
	}
	if _, ok := _c.mutation.ContentVector1024(); !ok {
		return &ValidationError{Name: "content_vector_1024", err: errors.New(`ent: missing required field "ChatMessage.content_vector_1024"`)}
	}
	if _, ok := _c.mutation.ContentVector768(); !ok {
		return &ValidationError{Name: "content_vector_768", err: errors.New(`ent: missing required field "ChatMessage.content_vector_768"`)}
	}
	if _, ok := _c.mutation.JiebaTokens(); !ok {
		return &ValidationError{Name: "jieba_tokens", err: errors.New(`ent: missing required field "ChatMessage.jieba_tokens"`)}
	}
	if _, ok := _c.mutation.CreatedAt(); !ok {
		return &ValidationError{Name: "created_at", err: errors.New(`ent: missing required field "ChatMessage.created_at"`)}
	}
	if _, ok := _c.mutation.UpdatedAt(); !ok {
		return &ValidationError{Name: "updated_at", err: errors.New(`ent: missing required field "ChatMessage.updated_at"`)}
	}
	if _, ok := _c.mutation.DeletedAt(); !ok {
		return &ValidationError{Name: "deleted_at", err: errors.New(`ent: missing required field "ChatMessage.deleted_at"`)}
	}
	return nil
}

func (_c *ChatMessageCreate) sqlSave(ctx context.Context) (*ChatMessage, error) {
	if err := _c.check(); err != nil {
		return nil, err
	}
	_node, _spec := _c.createSpec()
	if err := sqlgraph.CreateNode(ctx, _c.driver, _spec); err != nil {
		if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	if _spec.ID.Value != nil {
		if id, ok := _spec.ID.Value.(*uuid.UUID); ok {
			_node.ID = *id
		} else if err := _node.ID.Scan(_spec.ID.Value); err != nil {
			return nil, err
		}
	}
	_c.mutation.id = &_node.ID
	_c.mutation.done = true
	return _node, nil
}

func (_c *ChatMessageCreate) createSpec() (*ChatMessage, *sqlgraph.CreateSpec) {
	var (
		_node = &ChatMessage{config: _c.config}
		_spec = sqlgraph.NewCreateSpec(chatmessage.Table, sqlgraph.NewFieldSpec(chatmessage.FieldID, field.TypeUUID))
	)
	_spec.Schema = _c.schemaConfig.ChatMessage
	_spec.OnConflict = _c.conflict
	if id, ok := _c.mutation.ID(); ok {
		_node.ID = id
		_spec.ID.Value = &id
	}
	if value, ok := _c.mutation.Platform(); ok {
		_spec.SetField(chatmessage.FieldPlatform, field.TypeString, value)
		_node.Platform = value
	}
	if value, ok := _c.mutation.PlatformMessageID(); ok {
		_spec.SetField(chatmessage.FieldPlatformMessageID, field.TypeString, value)
		_node.PlatformMessageID = value
	}
	if value, ok := _c.mutation.FromID(); ok {
		_spec.SetField(chatmessage.FieldFromID, field.TypeString, value)
		_node.FromID = value
	}
	if value, ok := _c.mutation.FromName(); ok {
		_spec.SetField(chatmessage.FieldFromName, field.TypeString, value)
		_node.FromName = value
	}
	if value, ok := _c.mutation.FromUserUUID(); ok {
		_spec.SetField(chatmessage.FieldFromUserUUID, field.TypeUUID, value)
		_node.FromUserUUID = &value
	}
	if value, ok := _c.mutation.OwnerAccountID(); ok {
		_spec.SetField(chatmessage.FieldOwnerAccountID, field.TypeUUID, value)
		_node.OwnerAccountID = &value
	}
	if value, ok := _c.mutation.InChatID(); ok {
		_spec.SetField(chatmessage.FieldInChatID, field.TypeString, value)
		_node.InChatID = value
	}
	if value, ok := _c.mutation.InChatType(); ok {
		_spec.SetField(chatmessage.FieldInChatType, field.TypeString, value)
		_node.InChatType = value
	}
	if value, ok := _c.mutation.Content(); ok {
		_spec.SetField(chatmessage.FieldContent, field.TypeString, value)
		_node.Content = value
	}
	if value, ok := _c.mutation.IsReply(); ok {
		_spec.SetField(chatmessage.FieldIsReply, field.TypeBool, value)
		_node.IsReply = value
	}
	if value, ok := _c.mutation.ReplyToName(); ok {
		_spec.SetField(chatmessage.FieldReplyToName, field.TypeString, value)
		_node.ReplyToName = value
	}
	if value, ok := _c.mutation.ReplyToID(); ok {
		_spec.SetField(chatmessage.FieldReplyToID, field.TypeString, value)
		_node.ReplyToID = value
	}
	if value, ok := _c.mutation.PlatformTimestamp(); ok {
		_spec.SetField(chatmessage.FieldPlatformTimestamp, field.TypeInt64, value)
		_node.PlatformTimestamp = value
	}
	if value, ok := _c.mutation.ContentVector1536(); ok {
		_spec.SetField(chatmessage.FieldContentVector1536, field.TypeOther, value)
		_node.ContentVector1536 = &value
	}
	if value, ok := _c.mutation.ContentVector1024(); ok {
		_spec.SetField(chatmessage.FieldContentVector1024, field.TypeOther, value)
		_node.ContentVector1024 = &value
	}
	if value, ok := _c.mutation.ContentVector768(); ok {
		_spec.SetField(chatmessage.FieldContentVector768, field.TypeOther, value)
		_node.ContentVector768 = &value
	}
	if value, ok := _c.mutation.JiebaTokens(); ok {
		_spec.SetField(chatmessage.FieldJiebaTokens, field.TypeJSON, value)
		_node.JiebaTokens = value
	}
	if value, ok := _c.mutation.CreatedAt(); ok {
		_spec.SetField(chatmessage.FieldCreatedAt, field.TypeInt64, value)
		_node.CreatedAt = value
	}
	if value, ok := _c.mutation.UpdatedAt(); ok {
		_spec.SetField(chatmessage.FieldUpdatedAt, field.TypeInt64, value)
		_node.UpdatedAt = value
	}
	if value, ok := _c.mutation.DeletedAt(); ok {
		_spec.SetField(chatmessage.FieldDeletedAt, field.TypeInt64, value)
		_node.DeletedAt = value
	}
	return _node, _spec
}

// OnConflict allows configuring the `ON CONFLICT` / `ON DUPLICATE KEY` clause
// of the `INSERT` statement. For example:
//
//	client.ChatMessage.Create().
//		SetPlatform(v).
//		OnConflict(
//			// Update the row with the new values
//			// the was proposed for insertion.
//			sql.ResolveWithNewValues(),
//		).
//		// Override some of the fields with custom
//		// update values.
//		Update(func(u *ent.ChatMessageUpsert) {
//			SetPlatform(v+v).
//		}).
//		Exec(ctx)
func (_c *ChatMessageCreate) OnConflict(opts ...sql.ConflictOption) *ChatMessageUpsertOne {
	_c.conflict = opts
	return &ChatMessageUpsertOne{
		create: _c,
	}
}

// OnConflictColumns calls `OnConflict` and configures the columns
// as conflict target. Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//		OnConflict(sql.ConflictColumns(columns...)).
//		Exec(ctx)
func (_c *ChatMessageCreate) OnConflictColumns(columns ...string) *ChatMessageUpsertOne {
	_c.conflict = append(_c.conflict, sql.ConflictColumns(columns...))
	return &ChatMessageUpsertOne{
		create: _c,
	}
}

type (
	// ChatMessageUpsertOne is the builder for "upsert"-ing
	//  one ChatMessage node.
	ChatMessageUpsertOne struct {
		create *ChatMessageCreate
	}

	// ChatMessageUpsert is the "OnConflict" setter.
	ChatMessageUpsert struct {
		*sql.UpdateSet
	}
)

// SetPlatform sets the "platform" field.
func (u *ChatMessageUpsert) SetPlatform(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldPlatform, v)
	return u
}

// UpdatePlatform sets the "platform" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdatePlatform() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldPlatform)
	return u
}

// SetPlatformMessageID sets the "platform_message_id" field.
func (u *ChatMessageUpsert) SetPlatformMessageID(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldPlatformMessageID, v)
	return u
}

// UpdatePlatformMessageID sets the "platform_message_id" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdatePlatformMessageID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldPlatformMessageID)
	return u
}

// SetFromID sets the "from_id" field.
func (u *ChatMessageUpsert) SetFromID(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldFromID, v)
	return u
}

// UpdateFromID sets the "from_id" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateFromID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldFromID)
	return u
}

// SetFromName sets the "from_name" field.
func (u *ChatMessageUpsert) SetFromName(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldFromName, v)
	return u
}

// UpdateFromName sets the "from_name" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateFromName() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldFromName)
	return u
}

// SetFromUserUUID sets the "from_user_uuid" field.
func (u *ChatMessageUpsert) SetFromUserUUID(v uuid.UUID) *ChatMessageUpsert {
	u.Set(chatmessage.FieldFromUserUUID, v)
	return u
}

// UpdateFromUserUUID sets the "from_user_uuid" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateFromUserUUID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldFromUserUUID)
	return u
}

// ClearFromUserUUID clears the value of the "from_user_uuid" field.
func (u *ChatMessageUpsert) ClearFromUserUUID() *ChatMessageUpsert {
	u.SetNull(chatmessage.FieldFromUserUUID)
	return u
}

// SetOwnerAccountID sets the "owner_account_id" field.
func (u *ChatMessageUpsert) SetOwnerAccountID(v uuid.UUID) *ChatMessageUpsert {
	u.Set(chatmessage.FieldOwnerAccountID, v)
	return u
}

// UpdateOwnerAccountID sets the "owner_account_id" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateOwnerAccountID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldOwnerAccountID)
	return u
}

// ClearOwnerAccountID clears the value of the "owner_account_id" field.
func (u *ChatMessageUpsert) ClearOwnerAccountID() *ChatMessageUpsert {
	u.SetNull(chatmessage.FieldOwnerAccountID)
	return u
}

// SetInChatID sets the "in_chat_id" field.
func (u *ChatMessageUpsert) SetInChatID(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldInChatID, v)
	return u
}

// UpdateInChatID sets the "in_chat_id" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateInChatID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldInChatID)
	return u
}

// SetInChatType sets the "in_chat_type" field.
func (u *ChatMessageUpsert) SetInChatType(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldInChatType, v)
	return u
}

// UpdateInChatType sets the "in_chat_type" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateInChatType() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldInChatType)
	return u
}

// SetContent sets the "content" field.
func (u *ChatMessageUpsert) SetContent(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldContent, v)
	return u
}

// UpdateContent sets the "content" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateContent() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldContent)
	return u
}

// SetIsReply sets the "is_reply" field.
func (u *ChatMessageUpsert) SetIsReply(v bool) *ChatMessageUpsert {
	u.Set(chatmessage.FieldIsReply, v)
	return u
}

// UpdateIsReply sets the "is_reply" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateIsReply() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldIsReply)
	return u
}

// SetReplyToName sets the "reply_to_name" field.
func (u *ChatMessageUpsert) SetReplyToName(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldReplyToName, v)
	return u
}

// UpdateReplyToName sets the "reply_to_name" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateReplyToName() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldReplyToName)
	return u
}

// SetReplyToID sets the "reply_to_id" field.
func (u *ChatMessageUpsert) SetReplyToID(v string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldReplyToID, v)
	return u
}

// UpdateReplyToID sets the "reply_to_id" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateReplyToID() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldReplyToID)
	return u
}

// SetPlatformTimestamp sets the "platform_timestamp" field.
func (u *ChatMessageUpsert) SetPlatformTimestamp(v int64) *ChatMessageUpsert {
	u.Set(chatmessage.FieldPlatformTimestamp, v)
	return u
}

// UpdatePlatformTimestamp sets the "platform_timestamp" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdatePlatformTimestamp() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldPlatformTimestamp)
	return u
}

// AddPlatformTimestamp adds v to the "platform_timestamp" field.
func (u *ChatMessageUpsert) AddPlatformTimestamp(v int64) *ChatMessageUpsert {
	u.Add(chatmessage.FieldPlatformTimestamp, v)
	return u
}

// SetContentVector1536 sets the "content_vector_1536" field.
func (u *ChatMessageUpsert) SetContentVector1536(v pgvector.Vector) *ChatMessageUpsert {
	u.Set(chatmessage.FieldContentVector1536, v)
	return u
}

// UpdateContentVector1536 sets the "content_vector_1536" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateContentVector1536() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldContentVector1536)
	return u
}

// SetContentVector1024 sets the "content_vector_1024" field.
func (u *ChatMessageUpsert) SetContentVector1024(v pgvector.Vector) *ChatMessageUpsert {
	u.Set(chatmessage.FieldContentVector1024, v)
	return u
}

// UpdateContentVector1024 sets the "content_vector_1024" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateContentVector1024() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldContentVector1024)
	return u
}

// SetContentVector768 sets the "content_vector_768" field.
func (u *ChatMessageUpsert) SetContentVector768(v pgvector.Vector) *ChatMessageUpsert {
	u.Set(chatmessage.FieldContentVector768, v)
	return u
}

// UpdateContentVector768 sets the "content_vector_768" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateContentVector768() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldContentVector768)
	return u
}

// SetJiebaTokens sets the "jieba_tokens" field.
func (u *ChatMessageUpsert) SetJiebaTokens(v []string) *ChatMessageUpsert {
	u.Set(chatmessage.FieldJiebaTokens, v)
	return u
}

// UpdateJiebaTokens sets the "jieba_tokens" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateJiebaTokens() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldJiebaTokens)
	return u
}

// SetCreatedAt sets the "created_at" field.
func (u *ChatMessageUpsert) SetCreatedAt(v int64) *ChatMessageUpsert {
	u.Set(chatmessage.FieldCreatedAt, v)
	return u
}

// UpdateCreatedAt sets the "created_at" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateCreatedAt() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldCreatedAt)
	return u
}

// AddCreatedAt adds v to the "created_at" field.
func (u *ChatMessageUpsert) AddCreatedAt(v int64) *ChatMessageUpsert {
	u.Add(chatmessage.FieldCreatedAt, v)
	return u
}

// SetUpdatedAt sets the "updated_at" field.
func (u *ChatMessageUpsert) SetUpdatedAt(v int64) *ChatMessageUpsert {
	u.Set(chatmessage.FieldUpdatedAt, v)
	return u
}

// UpdateUpdatedAt sets the "updated_at" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateUpdatedAt() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldUpdatedAt)
	return u
}

// AddUpdatedAt adds v to the "updated_at" field.
func (u *ChatMessageUpsert) AddUpdatedAt(v int64) *ChatMessageUpsert {
	u.Add(chatmessage.FieldUpdatedAt, v)
	return u
}

// SetDeletedAt sets the "deleted_at" field.
func (u *ChatMessageUpsert) SetDeletedAt(v int64) *ChatMessageUpsert {
	u.Set(chatmessage.FieldDeletedAt, v)
	return u
}

// UpdateDeletedAt sets the "deleted_at" field to the value that was provided on create.
func (u *ChatMessageUpsert) UpdateDeletedAt() *ChatMessageUpsert {
	u.SetExcluded(chatmessage.FieldDeletedAt)
	return u
}

// AddDeletedAt adds v to the "deleted_at" field.
func (u *ChatMessageUpsert) AddDeletedAt(v int64) *ChatMessageUpsert {
	u.Add(chatmessage.FieldDeletedAt, v)
	return u
}

// UpdateNewValues updates the mutable fields using the new values that were set on create except the ID field.
// Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//		OnConflict(
//			sql.ResolveWithNewValues(),
//			sql.ResolveWith(func(u *sql.UpdateSet) {
//				u.SetIgnore(chatmessage.FieldID)
//			}),
//		).
//		Exec(ctx)
func (u *ChatMessageUpsertOne) UpdateNewValues() *ChatMessageUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithNewValues())
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(s *sql.UpdateSet) {
		if _, exists := u.create.mutation.ID(); exists {
			s.SetIgnore(chatmessage.FieldID)
		}
	}))
	return u
}

// Ignore sets each column to itself in case of conflict.
// Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//	    OnConflict(sql.ResolveWithIgnore()).
//	    Exec(ctx)
func (u *ChatMessageUpsertOne) Ignore() *ChatMessageUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithIgnore())
	return u
}

// DoNothing configures the conflict_action to `DO NOTHING`.
// Supported only by SQLite and PostgreSQL.
func (u *ChatMessageUpsertOne) DoNothing() *ChatMessageUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.DoNothing())
	return u
}

// Update allows overriding fields `UPDATE` values. See the ChatMessageCreate.OnConflict
// documentation for more info.
func (u *ChatMessageUpsertOne) Update(set func(*ChatMessageUpsert)) *ChatMessageUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(update *sql.UpdateSet) {
		set(&ChatMessageUpsert{UpdateSet: update})
	}))
	return u
}

// SetPlatform sets the "platform" field.
func (u *ChatMessageUpsertOne) SetPlatform(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatform(v)
	})
}

// UpdatePlatform sets the "platform" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdatePlatform() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatform()
	})
}

// SetPlatformMessageID sets the "platform_message_id" field.
func (u *ChatMessageUpsertOne) SetPlatformMessageID(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatformMessageID(v)
	})
}

// UpdatePlatformMessageID sets the "platform_message_id" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdatePlatformMessageID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatformMessageID()
	})
}

// SetFromID sets the "from_id" field.
func (u *ChatMessageUpsertOne) SetFromID(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromID(v)
	})
}

// UpdateFromID sets the "from_id" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateFromID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromID()
	})
}

// SetFromName sets the "from_name" field.
func (u *ChatMessageUpsertOne) SetFromName(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromName(v)
	})
}

// UpdateFromName sets the "from_name" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateFromName() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromName()
	})
}

// SetFromUserUUID sets the "from_user_uuid" field.
func (u *ChatMessageUpsertOne) SetFromUserUUID(v uuid.UUID) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromUserUUID(v)
	})
}

// UpdateFromUserUUID sets the "from_user_uuid" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateFromUserUUID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromUserUUID()
	})
}

// ClearFromUserUUID clears the value of the "from_user_uuid" field.
func (u *ChatMessageUpsertOne) ClearFromUserUUID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.ClearFromUserUUID()
	})
}

// SetOwnerAccountID sets the "owner_account_id" field.
func (u *ChatMessageUpsertOne) SetOwnerAccountID(v uuid.UUID) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetOwnerAccountID(v)
	})
}

// UpdateOwnerAccountID sets the "owner_account_id" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateOwnerAccountID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateOwnerAccountID()
	})
}

// ClearOwnerAccountID clears the value of the "owner_account_id" field.
func (u *ChatMessageUpsertOne) ClearOwnerAccountID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.ClearOwnerAccountID()
	})
}

// SetInChatID sets the "in_chat_id" field.
func (u *ChatMessageUpsertOne) SetInChatID(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetInChatID(v)
	})
}

// UpdateInChatID sets the "in_chat_id" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateInChatID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateInChatID()
	})
}

// SetInChatType sets the "in_chat_type" field.
func (u *ChatMessageUpsertOne) SetInChatType(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetInChatType(v)
	})
}

// UpdateInChatType sets the "in_chat_type" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateInChatType() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateInChatType()
	})
}

// SetContent sets the "content" field.
func (u *ChatMessageUpsertOne) SetContent(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContent(v)
	})
}

// UpdateContent sets the "content" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateContent() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContent()
	})
}

// SetIsReply sets the "is_reply" field.
func (u *ChatMessageUpsertOne) SetIsReply(v bool) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetIsReply(v)
	})
}

// UpdateIsReply sets the "is_reply" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateIsReply() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateIsReply()
	})
}

// SetReplyToName sets the "reply_to_name" field.
func (u *ChatMessageUpsertOne) SetReplyToName(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetReplyToName(v)
	})
}

// UpdateReplyToName sets the "reply_to_name" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateReplyToName() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateReplyToName()
	})
}

// SetReplyToID sets the "reply_to_id" field.
func (u *ChatMessageUpsertOne) SetReplyToID(v string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetReplyToID(v)
	})
}

// UpdateReplyToID sets the "reply_to_id" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateReplyToID() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateReplyToID()
	})
}

// SetPlatformTimestamp sets the "platform_timestamp" field.
func (u *ChatMessageUpsertOne) SetPlatformTimestamp(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatformTimestamp(v)
	})
}

// AddPlatformTimestamp adds v to the "platform_timestamp" field.
func (u *ChatMessageUpsertOne) AddPlatformTimestamp(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddPlatformTimestamp(v)
	})
}

// UpdatePlatformTimestamp sets the "platform_timestamp" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdatePlatformTimestamp() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatformTimestamp()
	})
}

// SetContentVector1536 sets the "content_vector_1536" field.
func (u *ChatMessageUpsertOne) SetContentVector1536(v pgvector.Vector) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector1536(v)
	})
}

// UpdateContentVector1536 sets the "content_vector_1536" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateContentVector1536() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector1536()
	})
}

// SetContentVector1024 sets the "content_vector_1024" field.
func (u *ChatMessageUpsertOne) SetContentVector1024(v pgvector.Vector) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector1024(v)
	})
}

// UpdateContentVector1024 sets the "content_vector_1024" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateContentVector1024() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector1024()
	})
}

// SetContentVector768 sets the "content_vector_768" field.
func (u *ChatMessageUpsertOne) SetContentVector768(v pgvector.Vector) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector768(v)
	})
}

// UpdateContentVector768 sets the "content_vector_768" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateContentVector768() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector768()
	})
}

// SetJiebaTokens sets the "jieba_tokens" field.
func (u *ChatMessageUpsertOne) SetJiebaTokens(v []string) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetJiebaTokens(v)
	})
}

// UpdateJiebaTokens sets the "jieba_tokens" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateJiebaTokens() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateJiebaTokens()
	})
}

// SetCreatedAt sets the "created_at" field.
func (u *ChatMessageUpsertOne) SetCreatedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetCreatedAt(v)
	})
}

// AddCreatedAt adds v to the "created_at" field.
func (u *ChatMessageUpsertOne) AddCreatedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddCreatedAt(v)
	})
}

// UpdateCreatedAt sets the "created_at" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateCreatedAt() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateCreatedAt()
	})
}

// SetUpdatedAt sets the "updated_at" field.
func (u *ChatMessageUpsertOne) SetUpdatedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetUpdatedAt(v)
	})
}

// AddUpdatedAt adds v to the "updated_at" field.
func (u *ChatMessageUpsertOne) AddUpdatedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddUpdatedAt(v)
	})
}

// UpdateUpdatedAt sets the "updated_at" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateUpdatedAt() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateUpdatedAt()
	})
}

// SetDeletedAt sets the "deleted_at" field.
func (u *ChatMessageUpsertOne) SetDeletedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetDeletedAt(v)
	})
}

// AddDeletedAt adds v to the "deleted_at" field.
func (u *ChatMessageUpsertOne) AddDeletedAt(v int64) *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddDeletedAt(v)
	})
}

// UpdateDeletedAt sets the "deleted_at" field to the value that was provided on create.
func (u *ChatMessageUpsertOne) UpdateDeletedAt() *ChatMessageUpsertOne {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateDeletedAt()
	})
}

// Exec executes the query.
func (u *ChatMessageUpsertOne) Exec(ctx context.Context) error {
	if len(u.create.conflict) == 0 {
		return errors.New("ent: missing options for ChatMessageCreate.OnConflict")
	}
	return u.create.Exec(ctx)
}

// ExecX is like Exec, but panics if an error occurs.
func (u *ChatMessageUpsertOne) ExecX(ctx context.Context) {
	if err := u.create.Exec(ctx); err != nil {
		panic(err)
	}
}

// Exec executes the UPSERT query and returns the inserted/updated ID.
func (u *ChatMessageUpsertOne) ID(ctx context.Context) (id uuid.UUID, err error) {
	if u.create.driver.Dialect() == dialect.MySQL {
		// In case of "ON CONFLICT", there is no way to get back non-numeric ID
		// fields from the database since MySQL does not support the RETURNING clause.
		return id, errors.New("ent: ChatMessageUpsertOne.ID is not supported by MySQL driver. Use ChatMessageUpsertOne.Exec instead")
	}
	node, err := u.create.Save(ctx)
	if err != nil {
		return id, err
	}
	return node.ID, nil
}

// IDX is like ID, but panics if an error occurs.
func (u *ChatMessageUpsertOne) IDX(ctx context.Context) uuid.UUID {
	id, err := u.ID(ctx)
	if err != nil {
		panic(err)
	}
	return id
}

// ChatMessageCreateBulk is the builder for creating many ChatMessage entities in bulk.
type ChatMessageCreateBulk struct {
	config
	err      error
	builders []*ChatMessageCreate
	conflict []sql.ConflictOption
}

// Save creates the ChatMessage entities in the database.
func (_c *ChatMessageCreateBulk) Save(ctx context.Context) ([]*ChatMessage, error) {
	if _c.err != nil {
		return nil, _c.err
	}
	specs := make([]*sqlgraph.CreateSpec, len(_c.builders))
	nodes := make([]*ChatMessage, len(_c.builders))
	mutators := make([]Mutator, len(_c.builders))
	for i := range _c.builders {
		func(i int, root context.Context) {
			builder := _c.builders[i]
			builder.defaults()
			var mut Mutator = MutateFunc(func(ctx context.Context, m Mutation) (Value, error) {
				mutation, ok := m.(*ChatMessageMutation)
				if !ok {
					return nil, fmt.Errorf("unexpected mutation type %T", m)
				}
				if err := builder.check(); err != nil {
					return nil, err
				}
				builder.mutation = mutation
				var err error
				nodes[i], specs[i] = builder.createSpec()
				if i < len(mutators)-1 {
					_, err = mutators[i+1].Mutate(root, _c.builders[i+1].mutation)
				} else {
					spec := &sqlgraph.BatchCreateSpec{Nodes: specs}
					spec.OnConflict = _c.conflict
					// Invoke the actual operation on the latest mutation in the chain.
					if err = sqlgraph.BatchCreate(ctx, _c.driver, spec); err != nil {
						if sqlgraph.IsConstraintError(err) {
							err = &ConstraintError{msg: err.Error(), wrap: err}
						}
					}
				}
				if err != nil {
					return nil, err
				}
				mutation.id = &nodes[i].ID
				mutation.done = true
				return nodes[i], nil
			})
			for i := len(builder.hooks) - 1; i >= 0; i-- {
				mut = builder.hooks[i](mut)
			}
			mutators[i] = mut
		}(i, ctx)
	}
	if len(mutators) > 0 {
		if _, err := mutators[0].Mutate(ctx, _c.builders[0].mutation); err != nil {
			return nil, err
		}
	}
	return nodes, nil
}

// SaveX is like Save, but panics if an error occurs.
func (_c *ChatMessageCreateBulk) SaveX(ctx context.Context) []*ChatMessage {
	v, err := _c.Save(ctx)
	if err != nil {
		panic(err)
	}
	return v
}

// Exec executes the query.
func (_c *ChatMessageCreateBulk) Exec(ctx context.Context) error {
	_, err := _c.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_c *ChatMessageCreateBulk) ExecX(ctx context.Context) {
	if err := _c.Exec(ctx); err != nil {
		panic(err)
	}
}

// OnConflict allows configuring the `ON CONFLICT` / `ON DUPLICATE KEY` clause
// of the `INSERT` statement. For example:
//
//	client.ChatMessage.CreateBulk(builders...).
//		OnConflict(
//			// Update the row with the new values
//			// the was proposed for insertion.
//			sql.ResolveWithNewValues(),
//		).
//		// Override some of the fields with custom
//		// update values.
//		Update(func(u *ent.ChatMessageUpsert) {
//			SetPlatform(v+v).
//		}).
//		Exec(ctx)
func (_c *ChatMessageCreateBulk) OnConflict(opts ...sql.ConflictOption) *ChatMessageUpsertBulk {
	_c.conflict = opts
	return &ChatMessageUpsertBulk{
		create: _c,
	}
}

// OnConflictColumns calls `OnConflict` and configures the columns
// as conflict target. Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//		OnConflict(sql.ConflictColumns(columns...)).
//		Exec(ctx)
func (_c *ChatMessageCreateBulk) OnConflictColumns(columns ...string) *ChatMessageUpsertBulk {
	_c.conflict = append(_c.conflict, sql.ConflictColumns(columns...))
	return &ChatMessageUpsertBulk{
		create: _c,
	}
}

// ChatMessageUpsertBulk is the builder for "upsert"-ing
// a bulk of ChatMessage nodes.
type ChatMessageUpsertBulk struct {
	create *ChatMessageCreateBulk
}

// UpdateNewValues updates the mutable fields using the new values that
// were set on create. Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//		OnConflict(
//			sql.ResolveWithNewValues(),
//			sql.ResolveWith(func(u *sql.UpdateSet) {
//				u.SetIgnore(chatmessage.FieldID)
//			}),
//		).
//		Exec(ctx)
func (u *ChatMessageUpsertBulk) UpdateNewValues() *ChatMessageUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithNewValues())
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(s *sql.UpdateSet) {
		for _, b := range u.create.builders {
			if _, exists := b.mutation.ID(); exists {
				s.SetIgnore(chatmessage.FieldID)
			}
		}
	}))
	return u
}

// Ignore sets each column to itself in case of conflict.
// Using this option is equivalent to using:
//
//	client.ChatMessage.Create().
//		OnConflict(sql.ResolveWithIgnore()).
//		Exec(ctx)
func (u *ChatMessageUpsertBulk) Ignore() *ChatMessageUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithIgnore())
	return u
}

// DoNothing configures the conflict_action to `DO NOTHING`.
// Supported only by SQLite and PostgreSQL.
func (u *ChatMessageUpsertBulk) DoNothing() *ChatMessageUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.DoNothing())
	return u
}

// Update allows overriding fields `UPDATE` values. See the ChatMessageCreateBulk.OnConflict
// documentation for more info.
func (u *ChatMessageUpsertBulk) Update(set func(*ChatMessageUpsert)) *ChatMessageUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(update *sql.UpdateSet) {
		set(&ChatMessageUpsert{UpdateSet: update})
	}))
	return u
}

// SetPlatform sets the "platform" field.
func (u *ChatMessageUpsertBulk) SetPlatform(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatform(v)
	})
}

// UpdatePlatform sets the "platform" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdatePlatform() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatform()
	})
}

// SetPlatformMessageID sets the "platform_message_id" field.
func (u *ChatMessageUpsertBulk) SetPlatformMessageID(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatformMessageID(v)
	})
}

// UpdatePlatformMessageID sets the "platform_message_id" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdatePlatformMessageID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatformMessageID()
	})
}

// SetFromID sets the "from_id" field.
func (u *ChatMessageUpsertBulk) SetFromID(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromID(v)
	})
}

// UpdateFromID sets the "from_id" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateFromID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromID()
	})
}

// SetFromName sets the "from_name" field.
func (u *ChatMessageUpsertBulk) SetFromName(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromName(v)
	})
}

// UpdateFromName sets the "from_name" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateFromName() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromName()
	})
}

// SetFromUserUUID sets the "from_user_uuid" field.
func (u *ChatMessageUpsertBulk) SetFromUserUUID(v uuid.UUID) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetFromUserUUID(v)
	})
}

// UpdateFromUserUUID sets the "from_user_uuid" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateFromUserUUID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateFromUserUUID()
	})
}

// ClearFromUserUUID clears the value of the "from_user_uuid" field.
func (u *ChatMessageUpsertBulk) ClearFromUserUUID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.ClearFromUserUUID()
	})
}

// SetOwnerAccountID sets the "owner_account_id" field.
func (u *ChatMessageUpsertBulk) SetOwnerAccountID(v uuid.UUID) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetOwnerAccountID(v)
	})
}

// UpdateOwnerAccountID sets the "owner_account_id" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateOwnerAccountID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateOwnerAccountID()
	})
}

// ClearOwnerAccountID clears the value of the "owner_account_id" field.
func (u *ChatMessageUpsertBulk) ClearOwnerAccountID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.ClearOwnerAccountID()
	})
}

// SetInChatID sets the "in_chat_id" field.
func (u *ChatMessageUpsertBulk) SetInChatID(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetInChatID(v)
	})
}

// UpdateInChatID sets the "in_chat_id" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateInChatID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateInChatID()
	})
}

// SetInChatType sets the "in_chat_type" field.
func (u *ChatMessageUpsertBulk) SetInChatType(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetInChatType(v)
	})
}

// UpdateInChatType sets the "in_chat_type" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateInChatType() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateInChatType()
	})
}

// SetContent sets the "content" field.
func (u *ChatMessageUpsertBulk) SetContent(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContent(v)
	})
}

// UpdateContent sets the "content" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateContent() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContent()
	})
}

// SetIsReply sets the "is_reply" field.
func (u *ChatMessageUpsertBulk) SetIsReply(v bool) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetIsReply(v)
	})
}

// UpdateIsReply sets the "is_reply" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateIsReply() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateIsReply()
	})
}

// SetReplyToName sets the "reply_to_name" field.
func (u *ChatMessageUpsertBulk) SetReplyToName(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetReplyToName(v)
	})
}

// UpdateReplyToName sets the "reply_to_name" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateReplyToName() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateReplyToName()
	})
}

// SetReplyToID sets the "reply_to_id" field.
func (u *ChatMessageUpsertBulk) SetReplyToID(v string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetReplyToID(v)
	})
}

// UpdateReplyToID sets the "reply_to_id" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateReplyToID() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateReplyToID()
	})
}

// SetPlatformTimestamp sets the "platform_timestamp" field.
func (u *ChatMessageUpsertBulk) SetPlatformTimestamp(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetPlatformTimestamp(v)
	})
}

// AddPlatformTimestamp adds v to the "platform_timestamp" field.
func (u *ChatMessageUpsertBulk) AddPlatformTimestamp(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddPlatformTimestamp(v)
	})
}

// UpdatePlatformTimestamp sets the "platform_timestamp" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdatePlatformTimestamp() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdatePlatformTimestamp()
	})
}

// SetContentVector1536 sets the "content_vector_1536" field.
func (u *ChatMessageUpsertBulk) SetContentVector1536(v pgvector.Vector) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector1536(v)
	})
}

// UpdateContentVector1536 sets the "content_vector_1536" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateContentVector1536() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector1536()
	})
}

// SetContentVector1024 sets the "content_vector_1024" field.
func (u *ChatMessageUpsertBulk) SetContentVector1024(v pgvector.Vector) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector1024(v)
	})
}

// UpdateContentVector1024 sets the "content_vector_1024" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateContentVector1024() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector1024()
	})
}

// SetContentVector768 sets the "content_vector_768" field.
func (u *ChatMessageUpsertBulk) SetContentVector768(v pgvector.Vector) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetContentVector768(v)
	})
}

// UpdateContentVector768 sets the "content_vector_768" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateContentVector768() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateContentVector768()
	})
}

// SetJiebaTokens sets the "jieba_tokens" field.
func (u *ChatMessageUpsertBulk) SetJiebaTokens(v []string) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetJiebaTokens(v)
	})
}

// UpdateJiebaTokens sets the "jieba_tokens" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateJiebaTokens() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateJiebaTokens()
	})
}

// SetCreatedAt sets the "created_at" field.
func (u *ChatMessageUpsertBulk) SetCreatedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetCreatedAt(v)
	})
}

// AddCreatedAt adds v to the "created_at" field.
func (u *ChatMessageUpsertBulk) AddCreatedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddCreatedAt(v)
	})
}

// UpdateCreatedAt sets the "created_at" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateCreatedAt() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateCreatedAt()
	})
}

// SetUpdatedAt sets the "updated_at" field.
func (u *ChatMessageUpsertBulk) SetUpdatedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetUpdatedAt(v)
	})
}

// AddUpdatedAt adds v to the "updated_at" field.
func (u *ChatMessageUpsertBulk) AddUpdatedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddUpdatedAt(v)
	})
}

// UpdateUpdatedAt sets the "updated_at" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateUpdatedAt() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateUpdatedAt()
	})
}

// SetDeletedAt sets the "deleted_at" field.
func (u *ChatMessageUpsertBulk) SetDeletedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.SetDeletedAt(v)
	})
}

// AddDeletedAt adds v to the "deleted_at" field.
func (u *ChatMessageUpsertBulk) AddDeletedAt(v int64) *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.AddDeletedAt(v)
	})
}

// UpdateDeletedAt sets the "deleted_at" field to the value that was provided on create.
func (u *ChatMessageUpsertBulk) UpdateDeletedAt() *ChatMessageUpsertBulk {
	return u.Update(func(s *ChatMessageUpsert) {
		s.UpdateDeletedAt()
	})
}

// Exec executes the query.
func (u *ChatMessageUpsertBulk) Exec(ctx context.Context) error {
	if u.create.err != nil {
		return u.create.err
	}
	for i, b := range u.create.builders {
		if len(b.conflict) != 0 {
			return fmt.Errorf("ent: OnConflict was set for builder %d. Set it on the ChatMessageCreateBulk instead", i)
		}
	}
	if len(u.create.conflict) == 0 {
		return errors.New("ent: missing options for ChatMessageCreateBulk.OnConflict")
	}
	return u.create.Exec(ctx)
}

// ExecX is like Exec, but panics if an error occurs.
func (u *ChatMessageUpsertBulk) ExecX(ctx context.Context) {
	if err := u.create.Exec(ctx); err != nil {
		panic(err)
	}
}
